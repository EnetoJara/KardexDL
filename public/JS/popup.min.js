!function(e,t,i,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(n){var m,r=e(this),a=e(i),s=e(t),l=e("body"),u=r.selector||"",p=!0,f=(new Date).getTime(),c=[],d=arguments[0],g="string"==typeof d,h=[].slice.call(arguments,1);return r.each(function(){var D,O,M,W,G,I,r=e.isPlainObject(n)?e.extend(!0,{},e.fn.popup.settings,n):e.extend({},e.fn.popup.settings),v=r.selector,b=r.className,w=r.error,y=r.metadata,C=r.namespace,T="."+r.namespace,P="module-"+C,x=e(this),k=e(r.context),S=e(r.scrollContext),E=e(r.boundary),A=r.target?e(r.target):x,j=0,F=!1,R=!1,H=this,N=x.data(P);I={initialize:function(){I.debug("Initializing",x),I.createID(),I.bind.events(),!I.exists()&&r.preserve&&I.create(),r.observeChanges&&I.observeChanges(),I.instantiate()},instantiate:function(){I.verbose("Storing instance",I),N=I,x.data(P,N)},observeChanges:function(){"MutationObserver"in t&&(M=new MutationObserver(I.event.documentChanged),M.observe(i,{childList:!0,subtree:!0}),I.debug("Setting up mutation observer",M))},refresh:function(){r.popup?D=e(r.popup).eq(0):r.inline&&(D=A.nextAll(v.popup).eq(0),r.popup=D),r.popup?(D.addClass(b.loading),O=I.get.offsetParent(),D.removeClass(b.loading),r.movePopup&&I.has.popup()&&I.get.offsetParent(D)[0]!==O[0]&&(I.debug("Moving popup to the same offset parent as activating element"),D.detach().appendTo(O))):O=r.inline?I.get.offsetParent(A):I.has.popup()?I.get.offsetParent(D):l,O.is("html")&&O[0]!==l[0]&&(I.debug("Setting page as offset parent"),O=l),I.get.variation()&&I.set.variation()},reposition:function(){I.refresh(),I.set.position()},destroy:function(){I.debug("Destroying previous module"),M&&M.disconnect(),D&&!r.preserve&&I.removePopup(),clearTimeout(I.hideTimer),clearTimeout(I.showTimer),I.unbind.close(),I.unbind.events(),x.removeData(P)},event:{start:function(t){var i=e.isPlainObject(r.delay)?r.delay.show:r.delay;clearTimeout(I.hideTimer),R||(I.showTimer=setTimeout(I.show,i))},end:function(){var t=e.isPlainObject(r.delay)?r.delay.hide:r.delay;clearTimeout(I.showTimer),I.hideTimer=setTimeout(I.hide,t)},touchstart:function(e){R=!0,I.show()},resize:function(){I.is.visible()&&I.set.position()},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==H||e(t).find(H).length>0)&&(I.debug("Element removed from DOM, tearing down events"),I.destroy())})})},hideGracefully:function(t){var o=e(t.target),n=e.contains(i.documentElement,t.target),r=o.closest(v.popup).length>0;t&&!r&&n?(I.debug("Click occurred outside popup hiding popup"),I.hide()):I.debug("Click was inside popup, keeping popup open")}},create:function(){var t=I.get.html(),i=I.get.title(),o=I.get.content();t||o||i?(I.debug("Creating pop-up html"),t||(t=r.templates.popup({title:i,content:o})),D=e("<div/>").addClass(b.popup).data(y.activator,x).html(t),r.inline?(I.verbose("Inserting popup element inline",D),D.insertAfter(x)):(I.verbose("Appending popup element to body",D),D.appendTo(k)),I.refresh(),I.set.variation(),r.hoverable&&I.bind.popup(),r.onCreate.call(D,H)):0!==A.next(v.popup).length?(I.verbose("Pre-existing popup found"),r.inline=!0,r.popup=A.next(v.popup).data(y.activator,x),I.refresh(),r.hoverable&&I.bind.popup()):r.popup?(e(r.popup).data(y.activator,x),I.verbose("Used popup specified in settings"),I.refresh(),r.hoverable&&I.bind.popup()):I.debug("No content specified skipping display",H)},createID:function(){G=(Math.random().toString(16)+"000000000").substr(2,8),W="."+G,I.verbose("Creating unique id for element",G)},toggle:function(){I.debug("Toggling pop-up"),I.is.hidden()?(I.debug("Popup is hidden, showing pop-up"),I.unbind.close(),I.show()):(I.debug("Popup is visible, hiding pop-up"),I.hide())},show:function(e){if(e=e||function(){},I.debug("Showing pop-up",r.transition),I.is.hidden()&&(!I.is.active()||!I.is.dropdown())){if(I.exists()||I.create(),r.onShow.call(D,H)===!1)return void I.debug("onShow callback returned false, cancelling popup animation");r.preserve||r.popup||I.refresh(),D&&I.set.position()&&(I.save.conditions(),r.exclusive&&I.hideAll(),I.animate.show(e))}},hide:function(e){if(e=e||function(){},I.is.visible()||I.is.animating()){if(r.onHide.call(D,H)===!1)return void I.debug("onHide callback returned false, cancelling popup animation");I.remove.visible(),I.unbind.close(),I.restore.conditions(),I.animate.hide(e)}},hideAll:function(){e(v.popup).filter("."+b.visible).each(function(){e(this).data(y.activator).popup("hide")})},exists:function(){return D?r.inline||r.popup?I.has.popup():D.closest(k).length>=1?!0:!1:!1},removePopup:function(){I.has.popup()&&!r.popup&&(I.debug("Removing popup",D),D.remove(),D=o,r.onRemove.call(D,H))},save:{conditions:function(){I.cache={title:x.attr("title")},I.cache.title&&x.removeAttr("title"),I.verbose("Saving original attributes",I.cache.title)}},restore:{conditions:function(){return I.cache&&I.cache.title&&(x.attr("title",I.cache.title),I.verbose("Restoring original attributes",I.cache.title)),!0}},supports:{svg:function(){return typeof SVGGraphicsElement===o}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},r.transition&&e.fn.transition!==o&&x.transition("is supported")?(I.set.visible(),D.transition({animation:r.transition+" in",queue:!1,debug:r.debug,verbose:r.verbose,duration:r.duration,onComplete:function(){I.bind.close(),t.call(D,H),r.onVisible.call(D,H)}})):I.error(w.noTransition)},hide:function(t){return t=e.isFunction(t)?t:function(){},I.debug("Hiding pop-up"),r.onHide.call(D,H)===!1?void I.debug("onHide callback returned false, cancelling popup animation"):void(r.transition&&e.fn.transition!==o&&x.transition("is supported")?D.transition({animation:r.transition+" out",queue:!1,duration:r.duration,debug:r.debug,verbose:r.verbose,onComplete:function(){I.reset(),t.call(D,H),r.onHidden.call(D,H)}}):I.error(w.noTransition))}},change:{content:function(e){D.html(e)}},get:{html:function(){return x.removeData(y.html),x.data(y.html)||r.html},title:function(){return x.removeData(y.title),x.data(y.title)||r.title},content:function(){return x.removeData(y.content),x.data(y.content)||x.attr("title")||r.content},variation:function(){return x.removeData(y.variation),x.data(y.variation)||r.variation},popup:function(){return D},popupOffset:function(){return D.offset()},calculations:function(){var u,e=A[0],i=E[0]==t,o=r.inline||r.popup&&r.movePopup?A.position():A.offset(),n=i?{top:0,left:0}:E.offset(),a={},l=i?{top:s.scrollTop(),left:s.scrollLeft()}:{top:0,left:0};return a={target:{element:A[0],width:A.outerWidth(),height:A.outerHeight(),top:o.top,left:o.left,margin:{}},popup:{width:D.outerWidth(),height:D.outerHeight()},parent:{width:O.outerWidth(),height:O.outerHeight()},screen:{top:n.top,left:n.left,scroll:{top:l.top,left:l.left},width:E.width(),height:E.height()}},r.setFluidWidth&&I.is.fluid()&&(a.container={width:D.parent().outerWidth()},a.popup.width=a.container.width),a.target.margin.top=r.inline?parseInt(t.getComputedStyle(e).getPropertyValue("margin-top"),10):0,a.target.margin.left=r.inline?I.is.rtl()?parseInt(t.getComputedStyle(e).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(e).getPropertyValue("margin-left"),10):0,u=a.screen,a.boundary={top:u.top+u.scroll.top,bottom:u.top+u.scroll.top+u.height,left:u.left+u.scroll.left,right:u.left+u.scroll.left+u.width},a},id:function(){return G},startEvent:function(){return"hover"==r.on?"mouseenter":"focus"==r.on?"focus":!1},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==r.on?"mouseleave":"focus"==r.on?"blur":!1},distanceFromBoundary:function(e,t){var o,n,i={};return t=t||I.get.calculations(),o=t.popup,n=t.boundary,e&&(i={top:e.top-n.top,left:e.left-n.left,right:n.right-(e.left+o.width),bottom:n.bottom-(e.top+o.height)},I.verbose("Distance from boundaries determined",e,i)),i},offsetParent:function(t){var i=t!==o?t[0]:x[0],n=i.parentNode,r=e(n);if(n)for(var a="none"===r.css("transform"),s="static"===r.css("position"),l=r.is("html");n&&!l&&s&&a;)n=n.parentNode,r=e(n),a="none"===r.css("transform"),s="static"===r.css("position"),l=r.is("html");return r&&r.length>0?r:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),i=t[0],o=t[1],n={top:"bottom",bottom:"top",left:"right",right:"left"},a={left:"center",center:"right",right:"left"},s={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"},l="top"==i||"bottom"==i,u=!1,p=!1,f=!1;return F||(I.verbose("All available positions available"),F=I.get.positions()),I.debug("Recording last position tried",e),F[e]=!0,"opposite"===r.prefer&&(f=[n[i],o],f=f.join(" "),u=F[f]===!0,I.debug("Trying opposite strategy",f)),"adjacent"===r.prefer&&l&&(f=[i,a[o]],f=f.join(" "),p=F[f]===!0,I.debug("Trying adjacent strategy",f)),(p||u)&&(I.debug("Using backup position",f),f=s[e]),f}},set:{position:function(e,t){if(0===A.length||0===D.length)return void I.error(w.notFound);var i,n,a,s,l,u,p,f;if(t=t||I.get.calculations(),e=e||x.data(y.position)||r.position,i=x.data(y.offset)||r.offset,n=r.distanceAway,a=t.target,s=t.popup,l=t.parent,0===a.width&&0===a.height&&!I.is.svg(a.element))return I.debug("Popup target is hidden, no action taken"),!1;switch(r.inline&&(I.debug("Adding margin to calculation",a.margin),"left center"==e||"right center"==e?(i+=a.margin.top,n+=-a.margin.left):"top left"==e||"top center"==e||"top right"==e?(i+=a.margin.left,n-=a.margin.top):(i+=a.margin.left,n+=a.margin.top)),I.debug("Determining popup position from calculations",e,t),I.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),I.debug("RTL: Popup position updated",e)),j==r.maxSearchDepth&&"string"==typeof r.lastResort&&(e=r.lastResort),e){case"top left":u={top:"auto",bottom:l.height-a.top+n,left:a.left+i,right:"auto"};break;case"top center":u={bottom:l.height-a.top+n,left:a.left+a.width/2-s.width/2+i,top:"auto",right:"auto"};break;case"top right":u={bottom:l.height-a.top+n,right:l.width-a.left-a.width-i,top:"auto",left:"auto"};break;case"left center":u={top:a.top+a.height/2-s.height/2+i,right:l.width-a.left+n,left:"auto",bottom:"auto"};break;case"right center":u={top:a.top+a.height/2-s.height/2+i,left:a.left+a.width+n,bottom:"auto",right:"auto"};break;case"bottom left":u={top:a.top+a.height+n,left:a.left+i,bottom:"auto",right:"auto"};break;case"bottom center":u={top:a.top+a.height+n,left:a.left+a.width/2-s.width/2+i,bottom:"auto",right:"auto"};break;case"bottom right":u={top:a.top+a.height+n,right:l.width-a.left-a.width-i,left:"auto",bottom:"auto"}}if(u===o&&I.error(w.invalidPosition,e),I.debug("Calculated popup positioning values",u),D.css(u).removeClass(b.position).addClass(e).addClass(b.loading),p=I.get.popupOffset(),f=I.get.distanceFromBoundary(p,t),I.is.offstage(f,e)){if(I.debug("Position is outside viewport",e),j<r.maxSearchDepth)return j++,e=I.get.nextPosition(e),I.debug("Trying new position",e),D?I.set.position(e,t):!1;if(!r.lastResort)return I.debug("Popup could not find a position to display",D),I.error(w.cannotPlace,H),I.remove.attempts(),I.remove.loading(),I.reset(),r.onUnplaceable.call(D,H),!1;I.debug("No position found, showing with last position")}return I.debug("Position is on stage",e),I.remove.attempts(),I.remove.loading(),r.setFluidWidth&&I.is.fluid()&&I.set.fluidWidth(t),!0},fluidWidth:function(e){e=e||I.get.calculations(),I.debug("Automatically setting element width to parent width",e.parent.width),D.css("width",e.container.width)},variation:function(e){e=e||I.get.variation(),e&&I.has.popup()&&(I.verbose("Adding variation to popup",e),D.addClass(e))},visible:function(){x.addClass(b.visible)}},remove:{loading:function(){D.removeClass(b.loading)},variation:function(e){e=e||I.get.variation(),e&&(I.verbose("Removing variation",e),D.removeClass(e))},visible:function(){x.removeClass(b.visible)},attempts:function(){I.verbose("Resetting all searched positions"),j=0,F=!1}},bind:{events:function(){I.debug("Binding popup events to module"),"click"==r.on&&x.on("click"+T,I.toggle),"hover"==r.on&&p&&x.on("touchstart"+T,I.event.touchstart),I.get.startEvent()&&x.on(I.get.startEvent()+T,I.event.start).on(I.get.endEvent()+T,I.event.end),r.target&&I.debug("Target set to element",A),s.on("resize"+W,I.event.resize)},popup:function(){I.verbose("Allowing hover events on popup to prevent closing"),D&&I.has.popup()&&D.on("mouseenter"+T,I.event.start).on("mouseleave"+T,I.event.end)},close:function(){(r.hideOnScroll===!0||"auto"==r.hideOnScroll&&"click"!=r.on)&&S.one(I.get.scrollEvent()+W,I.event.hideGracefully),"hover"==r.on&&R&&(I.verbose("Binding popup close event to document"),a.on("touchstart"+W,function(e){I.verbose("Touched away from popup"),I.event.hideGracefully.call(H,e)})),"click"==r.on&&r.closable&&(I.verbose("Binding popup close event to document"),a.on("click"+W,function(e){I.verbose("Clicked away from popup"),I.event.hideGracefully.call(H,e)}))}},unbind:{events:function(){s.off(W),x.off(T)},close:function(){a.off(W),S.off(W)}},has:{popup:function(){return D&&D.length>0}},is:{offstage:function(t,i){var o=[];return e.each(t,function(e,t){t<-r.jitter&&(I.debug("Position exceeds allowable distance from edge",e,t,i),o.push(e))}),o.length>0?!0:!1},svg:function(e){return I.supports.svg()&&e instanceof SVGGraphicsElement},active:function(){return x.hasClass(b.active)},animating:function(){return D!==o&&D.hasClass(b.animating)},fluid:function(){return D!==o&&D.hasClass(b.fluid)},visible:function(){return D!==o&&D.hasClass(b.visible)},dropdown:function(){return x.hasClass(b.dropdown)},hidden:function(){return!I.is.visible()},rtl:function(){return"rtl"==x.css("direction")}},reset:function(){I.remove.visible(),r.preserve?e.fn.transition!==o&&D.transition("remove transition"):I.removePopup()},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,r,t);else{if(i===o)return r[t];r[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,I,t);else{if(i===o)return I[t];I[t]=i}},debug:function(){!r.silent&&r.debug&&(r.performance?I.performance.log(arguments):(I.debug=Function.prototype.bind.call(console.info,console,r.name+":"),I.debug.apply(console,arguments)))},verbose:function(){!r.silent&&r.verbose&&r.debug&&(r.performance?I.performance.log(arguments):(I.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),I.verbose.apply(console,arguments)))},error:function(){r.silent||(I.error=Function.prototype.bind.call(console.error,console,r.name+":"),I.error.apply(console,arguments))},performance:{log:function(e){var t,i,o;r.performance&&(t=(new Date).getTime(),o=f||t,i=t-o,f=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:H,"Execution Time":i})),clearTimeout(I.performance.timer),I.performance.timer=setTimeout(I.performance.display,500)},display:function(){var t=r.name+":",i=0;f=!1,clearTimeout(I.performance.timer),e.each(c,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",u&&(t+=" '"+u+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,i,n){var a,s,l,r=N;return i=i||h,n=H||n,"string"==typeof t&&r!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(i,n){var l=i!=a?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(r[l])&&i!=a)r=r[l];else{if(r[l]!==o)return s=r[l],!1;if(!e.isPlainObject(r[n])||i==a)return r[n]!==o?(s=r[n],!1):!1;r=r[n]}})),e.isFunction(s)?l=s.apply(n,i):s!==o&&(l=s),e.isArray(m)?m.push(l):m!==o?m=[m,l]:l!==o&&(m=l),s}},g?(N===o&&I.initialize(),I.invoke(d)):(N!==o&&N.invoke("destroy"),I.initialize())}),m!==o?m:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t=/[&<>"'`]/g,i=/[&<>"'`]/,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(e){return o[e]};return i.test(e)?e.replace(t,n):e},popup:function(t){var i="",n=e.fn.popup.settings.templates.escape;return typeof t!==o&&(typeof t.title!==o&&t.title&&(t.title=n(t.title),i+='<div class="header">'+t.title+"</div>"),typeof t.content!==o&&t.content&&(t.content=n(t.content),i+='<div class="content">'+t.content+"</div>")),i}}}}(jQuery,window,document);